#+TITLE:       OS X Emacs install Mew 2.0
#+AUTHOR:      venmos
#+EMAIL:       venmos@fuck.gfw.es
#+DATE:        2013-07-02
#+URI:         /blog/%y/%m/%d/osx-emacs-install-mew20
#+KEYWORDS:    osx, emacs, mew
#+TAGS:        osx, emacs,
#+LANGUAGE:    en
#+OPTIONS:     H:3 num:nil toc:nil \n:nil ::t |:t ^:nil -:nil f:t *:t <:t
#+DESCRIPTION: osx, emacs, mew

果然一用会Emacs就蛋疼，忍不住的要去折腾两把，今天晚上又把MEW装上了…

MEW在Mac上稍微比Linux复杂一点，不过花了点时间还是顺利搞定了。以前在Linux上安装MEW都是使用系统的包管理，并不知道到底装了MEW的什么文件，今天晚上一开始安装MEW的时候我还以为MEW只是有ELisp包而已，结果只安装了ELisp包之后倒是能正常的收信发信了，可是各种必要的小功能却各种错误，如：强制指定编码去阅读邮件，强制使用W3M去阅读HTML邮件等等。不过还好，稍微花了点功夫读了下MEW的文档，发现MEW需要二进制的可执行程序来执行这些功能，于是从Github上拖回源码，编译+建立软连接，顺利搞定！

首先使用Homebrew来安装W3M：

#+begin_src
brew install w3m
#+end_src

之后使用Emacs的el-get包管理来安装emacs-w3m，之后拖回MEW的源码进行编译安装：

#+begin_src
git clone https://github.com/kazu-yamamoto/Mew.git
cd Mew
./configure
make
sudo su
make install
#+end_src

这样安装之后MEW的程序都被安装到了/usr/local/bin/之中，这个目录Emacs是不会去找的，但是Emacs肯定是可以指定PATH的，折腾到现在我也懒得找了，直接建立软连接散伙：

#+begin_src
sudo su
ln -s /usr/local/bin/mew-pinentry /usr/bin/mew-pinentry
ln -s /usr/local/bin/mewcat /usr/bin/mewcat          
ln -s /usr/local/bin/mewdecode /usr/bin/mewdecode    
ln -s /usr/local/bin/mewencode /usr/bin/mewencode    
ln -s /usr/local/bin/mewest /usr/bin/mewest          
ln -s /usr/local/bin/mewl /usr/bin/mewl              
ln -s /usr/local/bin/smew /usr/bin/smew
#+end_src

然后将MEW的默认配置写入.emacs:

#+begin_src
(add-to-list 'load-path "~/.emacs.d/plugin/mew/")
(require 'mew)

(autoload 'mew "mew" nil t)
(autoload 'mew-send "mew" nil t)

(condition-case nil
    (require 'mew-w3m)
  (file-error nil))

(setq read-mail-command 'mew)

(autoload 'mew-user-agent-compose "mew" nil t)
(if (boundp 'mail-user-agent)
    (setq mail-user-agent 'mew-user-agent))
(if (fboundp 'define-mail-user-agent)
    (define-mail-user-agent
      'mew-user-agent
      'mew-user-agent-compose
      'mew-draft-send-message
      'mew-draft-kill
      'mew-send-hook))
#+end_src

之后建立~/.mew.el文件，这个文件是用来储存你的个人账户设置的，将邮箱设置写入即可。邮箱协议有很多种，有POP3有IMAP，有SSL的有不带SSL的，每个邮局设置还不大一样，配置信息网上一搜一大把，这里就不在废话了。
